function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},s=t.parcelRequiree839;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequiree839=s),s.register("iYPcn",(function(t,n){var r,s;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>s),(e=>s=e));var o={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},s=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s("iYPcn").register(JSON.parse('{"6C7OB":"worker.1fc3db97.js","3fypB":"wasm_gzip_bg.87c57404.wasm"}')),s.register("lc1Jl",(function(e,t){var n=s("aPuwP"),r=s("bdDKe");let o=Object.create(null);Object.assign(o,r),n.expose(o)})),s.register("aPuwP",(function(t,n){e(t.exports,"expose",(()=>u)),e(t.exports,"transfer",(()=>w));const r=Symbol("Comlink.proxy"),s=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.thrown"),a=e=>"object"==typeof e&&null!==e||"function"==typeof e,c=new Map([["proxy",{canHandle:e=>a(e)&&e[r],serialize(e){const{port1:t,port2:n}=new MessageChannel;return u(e,t),[n,[n]]},deserialize(e){return e.start(),h(e,[],t);var t}}],["throw",{canHandle:e=>a(e)&&i in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function u(e,t=self){t.addEventListener("message",(function n(s){if(!s||!s.data)return;const{id:o,type:a,path:c}=Object.assign({path:[]},s.data),l=(s.data.argumentList||[]).map(b);let h;try{const t=c.slice(0,-1).reduce(((e,t)=>e[t]),e),n=c.reduce(((e,t)=>e[t]),e);switch(a){case"GET":h=n;break;case"SET":t[c.slice(-1)[0]]=b(s.data.value),h=!0;break;case"APPLY":h=n.apply(t,l);break;case"CONSTRUCT":h=function(e){return Object.assign(e,{[r]:!0})}(new n(...l));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;u(e,n),h=w(t,[t])}break;case"RELEASE":h=void 0;break;default:return}}catch(e){h={value:e,[i]:0}}Promise.resolve(h).catch((e=>({value:e,[i]:0}))).then((e=>{const[r,s]=g(e);t.postMessage(Object.assign(Object.assign({},r),{id:o}),s),"RELEASE"===a&&(t.removeEventListener("message",n),f(t))}))})),t.start&&t.start()}function f(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function l(e){if(e)throw new Error("Proxy has been released and is not useable")}function h(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(n,s){if(l(r),s===o)return()=>m(e,{type:"RELEASE",path:t.map((e=>e.toString()))}).then((()=>{f(e),r=!0}));if("then"===s){if(0===t.length)return{then:()=>i};const n=m(e,{type:"GET",path:t.map((e=>e.toString()))}).then(b);return n.then.bind(n)}return h(e,[...t,s])},set(n,s,o){l(r);const[i,a]=g(o);return m(e,{type:"SET",path:[...t,s].map((e=>e.toString())),value:i},a).then(b)},apply(n,o,i){l(r);const a=t[t.length-1];if(a===s)return m(e,{type:"ENDPOINT"}).then(b);if("bind"===a)return h(e,t.slice(0,-1));const[c,u]=p(i);return m(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:c},u).then(b)},construct(n,s){l(r);const[o,i]=p(s);return m(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:o},i).then(b)}});return i}function p(e){const t=e.map(g);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const d=new WeakMap;function w(e,t){return d.set(e,t),e}function g(e){for(const[t,n]of c)if(n.canHandle(e)){const[r,s]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},s]}return[{type:"RAW",value:e},d.get(e)||[]]}function b(e){switch(e.type){case"HANDLER":return c.get(e.name).deserialize(e.value);case"RAW":return e.value}}function m(e,t,n){return new Promise((r=>{const s=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===s&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),n)}))}})),s.register("bdDKe",(function(t,n){e(t.exports,"createChunkData",(()=>p)),e(t.exports,"ChunkData",(()=>l)),e(t.exports,"makeChunks",(()=>d)),e(t.exports,"BufferView",(()=>s("csz24").BufferView));var r=s("csz24"),o=s("3UAYY"),i=s("lJ0z6");const a=new o.default("[Version-1]"),c=[[0,[0,1,0]],[1,[0,-1,0]],[2,[-1,0,0]],[3,[1,0,0]],[4,[0,0,1]],[5,[0,0,-1]]],u=(e,t)=>(e%t+t)%t,f=new Map;self.noiseMapCache=f;class l{constructor(e){return e}}function h(e,t,n,r){const s=~~(2*Math.random())-1;return t>100+s?2:t==n&&t>5+s?0:t<=5+s&&t>=-12+s?1:2}function p(e,t,n){const o=[e[0],e[2]].join(",");let p=f.get(o);p||(p=function(e,t,n,r,s,o=1){const i=[n,r],c=new Int16Array((n+2)*(r+2));for(let r=0;r<i[0]+2;r++)for(let o=0;o<i[1]+2;o++){let i=0;for(let n=0;n<5;n++){const c=5**(.55*(n+1))*10,u=(r+e)/c,f=(o+t)/c;i+=4*2**(n+1)*a.noise2D(f+s[n],u-s[n])}c[r*(n+2)+o]=i}return c}(e[2]*t[2],e[0]*t[0],t[2],t[0],n),f.set(o,p));const d=new r.ObjectBuffer(Int8Array,t[0]*t[2]*48),w=new r.ObjectBuffer(Int8Array,t[0]*t[2]*t[1]/3*12),g=new r.ObjectBuffer(Int8Array,t[0]*t[2]*2),b=new r.ObjectBuffer(Int16Array,t[0]*t[2]),m=[];for(let n=0;n<t[2];n++)for(let r=0;r<t[0];r++){const s=p[(n+1)*(t[0]+2)+r+1];s<=0&&g.push(r-t[0]/2,n-t[0]/2),s>m[1]&&(m[1]=s),s<m[0]&&(m[0]=s),b.push(d.used);const o=t[1]*e[1];if(!(s<o||s>o+t[1]))for(let i=s;i>=o;i--){let o=!1;const f=h(0,i,s);for(const[s,l]of c){Math.floor(50*a.noise3D((r+e[0]*t[0]+l[0])/80,(i+e[1]*t[1]+l[1])/80,(n+e[2]*t[2]+l[2])/80));p[(n+l[2]+1)*(t[0]+2)+r+1+l[0]]>=i+l[1]||(w.push(r-t[0]/2,u(i,t[1]),n-t[2]/2,24*f+4*s+Math.round((r^n)%4)-127),o=!0)}o&&d.push(r-t[0]/2,u(i,t[1]),n-t[0]/2)}}const y=w.serialize();return i.default(new URL(s("hnj9f"))).then((()=>{const e=performance.now();i.compressGzip(new Uint8Array(y.buffer)),performance.now()})),new l({colliderBoxBuffer:d.serialize(),terrainFaceBuffer:w.serialize(),waterFaceBuffer:g.serialize(),colliderJumpTable:b.serialize(),heightBoundaries:m,chunkSize:t})}function d(e,t,n){const r=[];for(const s of e)r.push(p(s,t,n));return r}})),s.register("csz24",(function(t,n){e(t.exports,"BufferView",(()=>o)),e(t.exports,"ObjectBuffer",(()=>i));var r=s("aPuwP");class o{constructor(e,t){this.isShared=!1,this.values=new e(this.createBuffer(t.length)),this.values.set(t,0),this.isShared||(this.values=r.transfer(this.values,[this.values.buffer]))}createBuffer(e){return new ArrayBuffer(e)}}class i{constructor(e,t){this.used=0,this.isShared=!1,t=Math.ceil(t),this.view=new e(this.createBuffer(t,e.BYTES_PER_ELEMENT)),this.length=t}push(...e){return this.view.set(e,this.used),this.used+=e.length,this.used}createBuffer(e,t){if("SharedArrayBuffer"in self)return this.isShared=!0,new SharedArrayBuffer(e*t);return new ArrayBuffer(e*t)}serialize(){const e=this.used<this.length?this.view.slice(0,this.used):this.view;return this.isShared?e:r.transfer(e,[e.buffer])}}})),s.register("3UAYY",(function(t,n){e(t.exports,"default",(()=>f));const r=.5*(Math.sqrt(3)-1),s=(3-Math.sqrt(3))/6,o=1/6,i=(Math.sqrt(5)-1)/4,a=(5-Math.sqrt(5))/20,c=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),u=new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);var f=class{constructor(e=Math.random){const t="function"==typeof e?e:function(e){let t=0,n=0,r=0,s=1;const o=function(){let e=4022871197;return function(t){t=t.toString();for(let n=0;n<t.length;n++){e+=t.charCodeAt(n);let r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)}}();t=o(" "),n=o(" "),r=o(" "),t-=o(e),t<0&&(t+=1);n-=o(e),n<0&&(n+=1);r-=o(e),r<0&&(r+=1);return function(){const e=2091639*t+2.3283064365386963e-10*s;return t=n,n=r,r=e-(s=0|e)}}(e);this.p=function(e){const t=new Uint8Array(256);for(let e=0;e<256;e++)t[e]=e;for(let n=0;n<255;n++){const r=n+~~(e()*(256-n)),s=t[n];t[n]=t[r],t[r]=s}return t}(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(let e=0;e<512;e++)this.perm[e]=this.p[255&e],this.permMod12[e]=this.perm[e]%12}noise2D(e,t){const n=this.permMod12,o=this.perm;let i=0,a=0,u=0;const f=(e+t)*r,l=Math.floor(e+f),h=Math.floor(t+f),p=(l+h)*s,d=e-(l-p),w=t-(h-p);let g,b;d>w?(g=1,b=0):(g=0,b=1);const m=d-g+s,y=w-b+s,_=d-1+2*s,v=w-1+2*s,A=255&l,E=255&h;let M=.5-d*d-w*w;if(M>=0){const e=3*n[A+o[E]];M*=M,i=M*M*(c[e]*d+c[e+1]*w)}let S=.5-m*m-y*y;if(S>=0){const e=3*n[A+g+o[E+b]];S*=S,a=S*S*(c[e]*m+c[e+1]*y)}let x=.5-_*_-v*v;if(x>=0){const e=3*n[A+1+o[E+1]];x*=x,u=x*x*(c[e]*_+c[e+1]*v)}return 70*(i+a+u)}noise3D(e,t,n){const r=this.permMod12,s=this.perm;let i,a,u,f;const l=.3333333333333333*(e+t+n),h=Math.floor(e+l),p=Math.floor(t+l),d=Math.floor(n+l),w=(h+p+d)*o,g=e-(h-w),b=t-(p-w),m=n-(d-w);let y,_,v,A,E,M;g>=b?b>=m?(y=1,_=0,v=0,A=1,E=1,M=0):g>=m?(y=1,_=0,v=0,A=1,E=0,M=1):(y=0,_=0,v=1,A=1,E=0,M=1):b<m?(y=0,_=0,v=1,A=0,E=1,M=1):g<m?(y=0,_=1,v=0,A=0,E=1,M=1):(y=0,_=1,v=0,A=1,E=1,M=0);const S=g-y+o,x=b-_+o,B=m-v+o,O=g-A+.3333333333333333,k=b-E+.3333333333333333,j=m-M+.3333333333333333,z=g-1+.5,R=b-1+.5,P=m-1+.5,C=255&h,L=255&p,T=255&d;let D=.6-g*g-b*b-m*m;if(D<0)i=0;else{const e=3*r[C+s[L+s[T]]];D*=D,i=D*D*(c[e]*g+c[e+1]*b+c[e+2]*m)}let N=.6-S*S-x*x-B*B;if(N<0)a=0;else{const e=3*r[C+y+s[L+_+s[T+v]]];N*=N,a=N*N*(c[e]*S+c[e+1]*x+c[e+2]*B)}let U=.6-O*O-k*k-j*j;if(U<0)u=0;else{const e=3*r[C+A+s[L+E+s[T+M]]];U*=U,u=U*U*(c[e]*O+c[e+1]*k+c[e+2]*j)}let I=.6-z*z-R*R-P*P;if(I<0)f=0;else{const e=3*r[C+1+s[L+1+s[T+1]]];I*=I,f=I*I*(c[e]*z+c[e+1]*R+c[e+2]*P)}return 32*(i+a+u+f)}noise4D(e,t,n,r){const s=this.perm;let o,c,f,l,h;const p=(e+t+n+r)*i,d=Math.floor(e+p),w=Math.floor(t+p),g=Math.floor(n+p),b=Math.floor(r+p),m=(d+w+g+b)*a,y=e-(d-m),_=t-(w-m),v=n-(g-m),A=r-(b-m);let E=0,M=0,S=0,x=0;y>_?E++:M++,y>v?E++:S++,y>A?E++:x++,_>v?M++:S++,_>A?M++:x++,v>A?S++:x++;const B=E>=3?1:0,O=M>=3?1:0,k=S>=3?1:0,j=x>=3?1:0,z=E>=2?1:0,R=M>=2?1:0,P=S>=2?1:0,C=x>=2?1:0,L=E>=1?1:0,T=M>=1?1:0,D=S>=1?1:0,N=x>=1?1:0,U=y-B+a,I=_-O+a,W=v-k+a,J=A-j+a,Y=y-z+2*a,F=_-R+2*a,H=v-P+2*a,q=A-C+2*a,G=y-L+3*a,V=_-T+3*a,$=v-D+3*a,K=A-N+3*a,X=y-1+4*a,Q=_-1+4*a,Z=v-1+4*a,ee=A-1+4*a,te=255&d,ne=255&w,re=255&g,se=255&b;let oe=.6-y*y-_*_-v*v-A*A;if(oe<0)o=0;else{const e=s[te+s[ne+s[re+s[se]]]]%32*4;oe*=oe,o=oe*oe*(u[e]*y+u[e+1]*_+u[e+2]*v+u[e+3]*A)}let ie=.6-U*U-I*I-W*W-J*J;if(ie<0)c=0;else{const e=s[te+B+s[ne+O+s[re+k+s[se+j]]]]%32*4;ie*=ie,c=ie*ie*(u[e]*U+u[e+1]*I+u[e+2]*W+u[e+3]*J)}let ae=.6-Y*Y-F*F-H*H-q*q;if(ae<0)f=0;else{const e=s[te+z+s[ne+R+s[re+P+s[se+C]]]]%32*4;ae*=ae,f=ae*ae*(u[e]*Y+u[e+1]*F+u[e+2]*H+u[e+3]*q)}let ce=.6-G*G-V*V-$*$-K*K;if(ce<0)l=0;else{const e=s[te+L+s[ne+T+s[re+D+s[se+N]]]]%32*4;ce*=ce,l=ce*ce*(u[e]*G+u[e+1]*V+u[e+2]*$+u[e+3]*K)}let ue=.6-X*X-Q*Q-Z*Z-ee*ee;if(ue<0)h=0;else{const e=s[te+1+s[ne+1+s[re+1+s[se+1]]]]%32*4;ue*=ue,h=ue*ue*(u[e]*X+u[e+1]*Q+u[e+2]*Z+u[e+3]*ee)}return 27*(o+c+f+l+h)}}})),s.register("lJ0z6",(function(t,n){e(t.exports,"compressGzip",(()=>v)),e(t.exports,"default",(()=>E));let r,s=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});s.decode();let o=null;function i(){return null!==o&&o.buffer===r.memory.buffer||(o=new Uint8Array(r.memory.buffer)),o}function a(e,t){return s.decode(i().subarray(e,e+t))}const c=new Array(32).fill(void 0);c.push(void 0,null,!0,!1);let u=c.length;function f(e){u===c.length&&c.push(c.length+1);const t=u;return u=c[t],c[t]=e,t}function l(e){return c[e]}function h(e){const t=l(e);return function(e){e<36||(c[e]=u,u=e)}(e),t}let p=0,d=new TextEncoder("utf-8");const w="function"==typeof d.encodeInto?function(e,t){return d.encodeInto(e,t)}:function(e,t){const n=d.encode(e);return t.set(n),{read:e.length,written:n.length}};function g(e,t,n){if(void 0===n){const n=d.encode(e),r=t(n.length);return i().subarray(r,r+n.length).set(n),p=n.length,r}let r=e.length,s=t(r);const o=i();let a=0;for(;a<r;a++){const t=e.charCodeAt(a);if(t>127)break;o[s+a]=t}if(a!==r){0!==a&&(e=e.slice(a)),s=n(s,r,r=a+3*e.length);const t=i().subarray(s+a,s+r);a+=w(e,t).written}return p=a,s}let b=null;function m(){return null!==b&&b.buffer===r.memory.buffer||(b=new Int32Array(r.memory.buffer)),b}function y(e,t){const n=t(1*e.length);return i().set(e,n/1),p=e.length,n}function _(e,t){return i().subarray(e/1,e/1+t)}function v(e){try{const i=r.__wbindgen_add_to_stack_pointer(-16);var t=y(e,r.__wbindgen_malloc),n=p;r.compressGzip(i,t,n);var s=m()[i/4+0],o=m()[i/4+1];let a;return 0!==s&&(a=_(s,o).slice(),r.__wbindgen_free(s,1*o)),a}finally{r.__wbindgen_add_to_stack_pointer(16)}}function A(e){return function(){try{return e.apply(this,arguments)}catch(e){r.__wbindgen_exn_store(f(e))}}}var E=async function e(t){void 0===t&&(t="file:///node_modules/wasm-gzip/wasm_gzip.js".replace(/\.js$/,"_bg.wasm"));const n={wbg:{}};n.wbg.__wbindgen_string_new=function(e,t){return f(a(e,t))},n.wbg.__wbg_parse_58b7cdbfa2b3e55a=A((function(e,t){return f(JSON.parse(a(e,t)))})),n.wbg.__wbindgen_object_drop_ref=function(e){h(e)},n.wbg.__wbg_stringify_e5f075a4462d77f0=A((function(e){return f(JSON.stringify(l(e)))})),n.wbg.__wbindgen_string_get=function(e,t){const n=l(t);var s="string"==typeof n?n:void 0,o=function(e){return null==e}(s)?0:g(s,r.__wbindgen_malloc,r.__wbindgen_realloc),i=p;m()[e/4+1]=i,m()[e/4+0]=o},n.wbg.__wbindgen_throw=function(e,t){throw new Error(a(e,t))},n.wbg.__wbindgen_rethrow=function(e){throw h(e)},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:s,module:o}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await t,n);return r=s.exports,e.__wbindgen_wasm_module=o,r}})),s.register("hnj9f",(function(e,t){e.exports=s("hWJ26").getBundleURL("6C7OB")+s("iYPcn").resolve("3fypB")})),s.register("hWJ26",(function(t,n){var r;e(t.exports,"getBundleURL",(()=>r),(e=>r=e));var s={};function o(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(e){var t=s[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return o(e[2])}return"/"}(),s[e]=t),t}})),s("lc1Jl");
//# sourceMappingURL=worker.1fc3db97.js.map
